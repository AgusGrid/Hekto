@use '../../../../styles/abstracts/variable' as *;

// ============================================
// LOCAL VARIABLES
// ============================================
$card-shadow: .5rem .75rem -1rem #10175026;
$card-border-radius: 0.25rem;
$card-border-radius-large: 0.5rem;
$card-transition-duration: 0.3s;
$card-transition-ease: ease;
$card-transition-cubic: cubic-bezier(0.4, 0, 0.2, 1);

// Spacing
$card-padding-sm: 1rem;
$card-padding-md: 1.5rem;
$card-padding-lg: 2rem;
$card-gap-sm: 0.5rem;
$card-gap-md: 0.75rem;
$card-gap-lg: 1rem;

// ============================================
// PLACEHOLDERS 
// ============================================

%card-image-wrapper-base {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

%card-image-base {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform $card-transition-duration $card-transition-ease;
}

%card-content-base {
    display: flex;
    flex-direction: column;
}

%card-info-base {
    display: flex;
    gap: $card-gap-sm;
}

%card-actions-base {
    position: absolute;
    display: flex;
    gap: $card-gap-md;
    opacity: 0;
    visibility: hidden;
    transition: opacity $card-transition-duration $card-transition-ease, 
                visibility $card-transition-duration $card-transition-ease;
}

%card-button-view {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s $card-transition-cubic, 
                visibility 0.4s $card-transition-cubic, 
                transform 0.4s $card-transition-cubic;
    position: absolute;
    bottom: 10%;
    left: 50%;
    transform: translateX(-50%) translateY(30px);
}

%card-hover-actions {
    &:hover {
        .card-actions {
            opacity: 1;
            visibility: visible;
        }
    }
}

// ============================================
// MAIN COMPONENT
// ============================================
.card {
    position: relative;
    
    // ============================================
    // VARIANT: FEATURED
    // ============================================
    &--featured {
        border-radius: $card-border-radius;
        display: grid;
        grid-template-rows: 60% auto;
        width: 19rem;
        height: 23rem;
        box-shadow: $card-shadow;
        
        .card-image-wrapper {
            @extend %card-image-wrapper-base;
        }
    
        .card-image {
            @extend %card-image-base;
        }
    
        .card-actions {
            @extend %card-actions-base;
            top: 13%;
            left: 25%;
            transform: translate(-50%, -50%);
        }
    
        &:hover {
            .card-image {
                transform: scale(1.05);
            }
    
            .card-actions {
                opacity: 1;
                visibility: visible;
            }
    
            .button--view-details {
                opacity: 1;
                visibility: visible;
                transform: translateX(-50%) translateY(0);
            }
        }
    
        .card-content {
            @extend %card-content-base;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: $card-padding-md $card-padding-sm;
            gap: $card-gap-md;
        }
    
        .card-title {
            color: $primary;
            margin: 0;
            margin-bottom: 1rem;
        }
    
        .card-info {
            @extend %card-info-base;
            flex-direction: column;
            align-items: center;
            
            &-text {
                color: $grey-3;
                margin: 0;
            }
            
            &-price {
                margin: 0;
            }
        }
    
        .button--view-details {
            @extend %card-button-view;
        }
    }

    // ============================================
    // VARIANT: LATEST
    // ============================================
    &--latest {
        width: 26rem; 
        height: 19rem; 
        display: grid;
        grid-template-rows: 90% auto;

        .card-image-wrapper {
            @extend %card-image-wrapper-base;
            overflow: visible;

            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
        }

        .card-actions {
            @extend %card-actions-base;
            bottom: 10%;
            left: 0%;
            flex-direction: column;
        }

        .card-content {
            display: flex;
            justify-content: space-between;
            padding-top: $card-gap-sm;

            .card-info {
                display: flex;
                flex-direction: row;
                align-items: flex-end;
                gap: $card-gap-lg;

                &--price {
                    color: $primary;
                }
            }
        }

        @extend %card-hover-actions;
    }

    .card-sale {
        position: absolute;
        top: 0;
        left: -10px;
        z-index: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        width: 5.336rem;  
        height: 3.531rem;
    
        color: $white;
    
        &-icon {
            width: 5.336rem;
            height: 3.531rem;
            position: absolute;
            top: 0.625rem;
            left: 0;
            z-index: 100;
        }
    
        &-text {
            position: absolute;
            top: 1.875rem; 
            left: 1.875rem; 
            z-index: 100;
            transform: rotate(-10deg)
        }
    }

    // ============================================
    // VARIANT: TRENDING
    // ============================================
    &--trending {
        width: 19rem;
        height: 21.5rem;
        box-shadow: $card-shadow;
        display: grid;
        grid-template-rows: 70% auto;

        .card-image-wrapper {
            @extend %card-image-wrapper-base;
            object-fit: cover;

            img {
                @extend %card-image-base;
                padding: $card-padding-sm;
                border-radius: $card-border-radius;
            }
        }

        .card-content {
            @extend %card-content-base;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: $card-padding-md $card-padding-sm;
            gap: $card-gap-md;

            .card-title {
                color: $primary;
            }

            .card-info {
                display: flex;
                gap: $card-gap-lg;

                &--price {
                    color: $grey-3;
                    text-decoration: line-through;
                }
            }
        }
    }

    // ============================================
    // VARIANT: TOP CATEGORY
    // ============================================
    &--top-category {
        width: 17rem; 
        height: 23rem;  
        display: grid;
        grid-template-rows: 70% auto;
        transition: box-shadow $card-transition-duration $card-transition-ease, 
                    transform $card-transition-duration $card-transition-ease;
        position: relative;
        z-index: 1;
     
        .card-image-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: visible;
            display: flex;
            justify-content: center;
            align-items: center;
    
            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 200px;
                transition: transform $card-transition-duration $card-transition-ease, 
                            box-shadow $card-transition-duration $card-transition-ease;
            }
        }
    
        .button--view-category {
            @extend %card-button-view;
        }
    
        .card-content {
            display: flex;
            justify-content: center;
            align-items: center;
            padding-top: $card-padding-sm;
            
            .card-title {
                margin: 0;
                text-align: center;
            }
        }
    
        &:hover {
            z-index: 10;
            
            img {
                transform: translateY(-10px);
                box-shadow: -5px 8px 0px 5px $grey-3;
            }
    
            .button--view-category {
                opacity: 1;
                visibility: visible;
                transform: translateX(-50%) translateY(0);
            }
        }
    }

    // ============================================
    // VARIANT: BLOG
    // ============================================
    &--blog {
        width: 26rem;
        height: 29.6875rem;
        display: grid;
        grid-template-rows: 60% auto;
        background-color: $white;
        border-radius: $card-border-radius-large;
        box-shadow: $card-shadow;
    
        .card-image-wrapper {
            @extend %card-image-wrapper-base;
            border-radius: $card-border-radius-large $card-border-radius-large 0 0;
    
            img {
                @extend %card-image-base;
            }
        }
    
        .card-content {
            @extend %card-content-base;
            padding: $card-padding-md;
            gap: $card-gap-lg;
            background-color: $white;
            
            .card-info {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0;
                
                &-item {
                    display: flex;
                    align-items: center;
                    gap: $card-gap-sm;
                    color: $grey-3;
                    
                    .card-info-icon {
                        width: 1rem;
                        height: 1rem;
                        object-fit: contain;
                    }
                }
            }
    
            .card-description {
                display: flex;
                flex-direction: column;
                gap: $card-gap-md;
                padding: 0;
                
                .card-title {
                    color: $black;
                    margin: 0;
                    margin-top: $card-gap-sm;
                    transition: color $card-transition-duration $card-transition-ease;
    
                    &:hover {
                        color: $primary;
                    }
                }
                
                .card-description-text {
                    color: $grey-3;
                    margin: 0;
                }
            }
            
            .card-read-more {
                color: $primary;
                text-decoration: none;
                font-weight: $font-semibold;
                margin-top: $card-gap-sm;
                transition: color $card-transition-duration $card-transition-ease;
                
                &:hover {
                    color: $primary-dark;
                }
            }
        }
    }

    // ============================================
    // VARIANT: FILTER GRID
    // ============================================
    &--filter-grid {
        width: 61rem;
        height: 14.5rem;
        display: grid;
        grid-template-columns: 30% auto;
        box-shadow: $card-shadow;

        > div {
            display: contents;
        }
    
        .card-image-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            
            img {
                width: 18rem;
                height: 12.5rem;
                object-fit: cover;
                border-radius: $card-border-radius;
                padding: 0 $card-gap-sm;
            }
        }
    
        .card-content {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: $card-padding-lg;
            gap: $card-gap-lg;

            .card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0;
                margin: 0;

                .card-rating {
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    gap: $card-gap-sm;
                }
            }

            .card-body {
                .card-info {
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    gap: $card-gap-lg;

                    &--price {
                        text-decoration: line-through;
                        color: $grey-3;
                    }
                }
            }

            .card-description-text {
                color: $grey-3;
                margin: 0;
            }

            .card-actions {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: $card-padding-lg;
                margin-top: auto;
            }
        }
    }

    // ============================================
    // VARIANT: FILTER WIDE
    // ============================================
    &--filter-wide {
        width: 19rem;
        height: 28rem;
        display: grid;
        grid-template-rows: auto 1fr;
        box-shadow: $card-shadow;
        background-color: $white;
        border-radius: $card-border-radius;

        > div {
            display: contents;
        }

        .card-image-wrapper {
            @extend %card-image-wrapper-base;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: $card-gap-sm;

            img {
                @extend %card-image-base;
                border-radius: $card-border-radius;
            }
        }

        .card-content {
            @extend %card-content-base;
            justify-content: space-between;
            gap: $card-gap-sm;
            padding: $card-padding-sm;
     
            .card-title {
                margin: 0;
            }

            .card-rating {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: $card-gap-sm;
            }

            .card-info {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: $card-gap-lg;

                &--discount {
                    margin: 0;
                    font-weight: $font-semibold;
                }

                &--price {
                    text-decoration: line-through;
                    color: $grey-3;
                    margin: 0;
                }
            }

            .card-description-text {
                flex-grow: 1;
                padding-top: $card-gap-sm;
                color: $grey-3;
                margin: 0;
            }

            .card-actions {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: $card-padding-lg;
                margin-top: auto;
            }
        }
    }

    // ============================================
    // SKELETON MODE 
    // ============================================
    @keyframes pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.6;
        }
    }

    &--skeleton {
        pointer-events: none;
        box-shadow: none !important;
        
        .card-image-wrapper {
            position: relative;
            
            &::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: $grey-1;
                animation: pulse 1.5s ease-in-out infinite;
                z-index: 2;
                pointer-events: none;
            }
            
            img {
                opacity: 0;
            }
            
            button,
            .card-actions {
                opacity: 0;
                visibility: hidden;
            }
        }
        
        .card-content {
            position: relative;
            border-radius: $card-border-radius-large;
            
            &::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: $grey-1;
                animation: pulse 1.5s ease-in-out infinite;
                z-index: 2;
                pointer-events: none;
            }
            
            p, span, a, div {
                visibility: hidden;
                opacity: 0;
            }
            
            img {
                opacity: 0;
                visibility: hidden;
            }
            
            button {
                opacity: 0;
                visibility: hidden;
            }
        }
        
        &.card--blog {
            background-color: transparent !important;
            
            .card-image-wrapper::after {
                border-radius: $card-border-radius-large $card-border-radius-large 0 0;
                background: $grey-1;
                animation: pulse 1.5s ease-in-out infinite;
            }
            
            .card-content {
                background-color: transparent !important;
                
                &::after {
                    border-radius: 0 0 $card-border-radius-large $card-border-radius-large;
                    background: $grey-1;
                    animation: pulse 1.5s ease-in-out infinite;
                }
            }
        }
        
        &.card--filter-wide {
            background-color: transparent !important;
            
            .card-content {
                background-color: transparent !important;
            }
        }
        
        &.card--top-category {
            .card-image-wrapper::after {
                border-radius: 12.5rem;
            }
        }
    }
}